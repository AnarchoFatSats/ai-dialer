version: 1
frontend:
  phases:
    preBuild:
      commands:
        - echo "=== Debugging directory structure ==="
        - pwd
        - ls -la
        - echo "=== Checking for amplify_ui directory ==="
        - ls -la amplify_ui/ || echo "amplify_ui directory not found"
        - echo "=== Installing dependencies ==="
        - cd amplify_ui && npm ci
    build:
      commands:
        - echo "=== Building React app ==="
        - echo "Current directory before build:"
        - pwd
        - ls -la
        - echo "=== Building in amplify_ui directory ==="
        - cd amplify_ui && pwd && npm run build
  artifacts:
    baseDirectory: amplify_ui/build
    files:
      - '**/*'
  cache:
    paths:
      - amplify_ui/node_modules/**/* 